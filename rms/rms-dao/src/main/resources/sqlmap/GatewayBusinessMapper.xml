<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cmiot.rms.dao.mapper.GatewayBusinessMapper" >
    <resultMap id="BaseResultMap" type="com.cmiot.rms.dao.model.GatewayBusiness" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" property="id" jdbcType="VARCHAR" />
        <result column="gateway_uuid" property="gatewayUuid" jdbcType="VARCHAR" />
        <result column="business_code" property="businessCode" jdbcType="VARCHAR" />
        <result column="business_code_boss" property="businessCodeBoss" jdbcType="VARCHAR" />
        <result column="business_name" property="businessName" jdbcType="VARCHAR" />
        <result column="parameter_list" property="parameterList" jdbcType="VARCHAR" />
        <result column="business_statu" property="businessStatu" jdbcType="VARCHAR" />
        <result column="areacode" jdbcType="VARCHAR" property="areacode" />
        <result column="bandwidth" jdbcType="INTEGER" property="bandwidth" />
        <result column="create_time" jdbcType="INTEGER" property="createTime" />
        <result column="business_type" jdbcType="VARCHAR" property="businessType" />
        <result column="gateway_password" jdbcType="VARCHAR" property="gatewayPassword" />
        <result column="adsl_password" jdbcType="VARCHAR" property="adslPassword" />
        <result column="adsl_account" jdbcType="VARCHAR" property="adslAccount" />
        <result column="order_no" jdbcType="VARCHAR" property="orderNo" />
        <result column="update_time" jdbcType="INTEGER" property="updateTime" />
        <result column="fail_count" property="failCount" jdbcType="INTEGER" />
        <result column="provCode" property="provcode" jdbcType="VARCHAR" />
	    <result column="userId_boss" property="useridBoss" jdbcType="VARCHAR" />
	    <result column="orderTime_boss" property="ordertimeBoss" jdbcType="TIMESTAMP" />
	    <result column="deviceType" property="devicetype" jdbcType="VARCHAR" />
	    <result column="userName_boss" property="usernameBoss" jdbcType="VARCHAR" />
	    <result column="userAddress_boss" property="useraddressBoss" jdbcType="VARCHAR" />
	    <result column="contactPerson_boss" property="contactpersonBoss" jdbcType="VARCHAR" />
	    <result column="contactManner_boss" property="contactmannerBoss" jdbcType="VARCHAR" />
	    <result column="vlanId" property="vlanid" jdbcType="VARCHAR" />
	    <result column="lanInterface" property="laninterface" jdbcType="VARCHAR" />
	    <result column="iPAddress" property="ipaddress" jdbcType="VARCHAR" />
	    <result column="subnetMask" property="subnetmask" jdbcType="VARCHAR" />
	    <result column="defaultGateway" property="defaultgateway" jdbcType="VARCHAR" />
	    <result column="port_sip" property="portSip" jdbcType="VARCHAR" />
	    <result column="uri_sip" property="uriSip" jdbcType="VARCHAR" />
	    <result column="defaultConnectionService" property="defaultconnectionservice" jdbcType="VARCHAR" />
	    <result column="wanInterface" property="wanInterface" jdbcType="VARCHAR" />
    </resultMap>

    <sql id="Base_Column_List" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id, gateway_uuid, business_code,business_code_boss, business_name, parameter_list, business_statu, areacode,
        bandwidth, create_time, business_type, gateway_password, adsl_password, adsl_account,
        order_no, update_time, fail_count, provCode, userId_boss,
	    orderTime_boss, deviceType, userName_boss, userAddress_boss, contactPerson_boss,
	    contactManner_boss, vlanId, lanInterface, iPAddress, subnetMask, defaultGateway,
	    port_sip, uri_sip, defaultConnectionService, wanInterface
    </sql>
    <insert id="insertSelective" parameterType="com.cmiot.rms.dao.model.GatewayBusiness" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into t_gateway_business
        <trim prefix="(" suffix=")" suffixOverrides="," >
            <if test="id != null" >
                id,
            </if>
            <if test="gatewayUuid != null" >
                gateway_uuid,
            </if>
            <if test="businessCode != null" >
                business_code,
            </if>
            <if test="businessCodeBoss != null" >
                business_code_boss,
            </if>
            <if test="businessName != null" >
                business_name,
            </if>
            <if test="parameterList != null" >
                parameter_list,
            </if>
            <if test="businessStatu != null" >
                business_statu,
            </if>
            <if test="areacode != null">
                areacode,
            </if>
            <if test="bandwidth != null">
                bandwidth,
            </if>
            <if test="createTime != null">
                create_time,
            </if>
            <if test="businessType != null">
                business_type,
            </if>
            <if test="gatewayPassword != null">
                gateway_password,
            </if>
            <if test="adslPassword != null">
                adsl_password,
            </if>
            <if test="adslAccount != null">
                adsl_account,
            </if>
            <if test="orderNo != null">
                order_no,
            </if>
            <if test="updateTime != null">
                update_time,
            </if>
            <if test="failCount != null" >
                fail_count,
            </if>
            <if test="provcode != null" >
		        provCode,
		      </if>
		      <if test="useridBoss != null" >
		        userId_boss,
		      </if>
		      <if test="ordertimeBoss != null" >
		        orderTime_boss,
		      </if>
		      <if test="devicetype != null" >
		        deviceType,
		      </if>
		      <if test="usernameBoss != null" >
		        userName_boss,
		      </if>
		      <if test="useraddressBoss != null" >
		        userAddress_boss,
		      </if>
		      <if test="contactpersonBoss != null" >
		        contactPerson_boss,
		      </if>
		      <if test="contactmannerBoss != null" >
		        contactManner_boss,
		      </if>
		      <if test="vlanid != null" >
		        vlanId,
		      </if>
		      <if test="laninterface != null" >
		        lanInterface,
		      </if>
		      <if test="ipaddress != null" >
		        iPAddress,
		      </if>
		      <if test="subnetmask != null" >
		        subnetMask,
		      </if>
		      <if test="defaultgateway != null" >
		        defaultGateway,
		      </if>
		      <if test="portSip != null" >
		        port_sip,
		      </if>
		      <if test="uriSip != null" >
		        uri_sip,
		      </if>
		      <if test="defaultconnectionservice != null" >
		        defaultConnectionService,
		      </if>
		      <if test="wanInterface != null" >
		        wanInterface,
		      </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides="," >
            <if test="id != null" >
                #{id,jdbcType=VARCHAR},
            </if>
            <if test="gatewayUuid != null" >
                #{gatewayUuid,jdbcType=VARCHAR},
            </if>
            <if test="businessCode != null" >
                #{businessCode,jdbcType=VARCHAR},
            </if>
            <if test="businessCodeBoss != null" >
                #{businessCodeBoss,jdbcType=VARCHAR},
            </if>
            <if test="businessName != null" >
                #{businessName,jdbcType=VARCHAR},
            </if>
            <if test="parameterList != null" >
                #{parameterList,jdbcType=VARCHAR},
            </if>
            <if test="businessStatu != null" >
                #{businessStatu,jdbcType=VARCHAR},
            </if>
            <if test="areacode != null">
                #{areacode,jdbcType=VARCHAR},
            </if>
            <if test="bandwidth != null">
                #{bandwidth,jdbcType=INTEGER},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=INTEGER},
            </if>
            <if test="businessType != null">
                #{businessType,jdbcType=VARCHAR},
            </if>
            <if test="gatewayPassword != null">
                #{gatewayPassword,jdbcType=VARCHAR},
            </if>
            <if test="adslPassword != null">
                #{adslPassword,jdbcType=VARCHAR},
            </if>
            <if test="adslAccount != null">
                #{adslAccount,jdbcType=VARCHAR},
            </if>
            <if test="orderNo != null">
                #{orderNo,jdbcType=VARCHAR},
            </if>
            <if test="updateTime != null">
                #{updateTime,jdbcType=INTEGER},
            </if>
            <if test="failCount != null" >
                #{failCount,jdbcType=INTEGER},
            </if>
            <if test="provcode != null" >
		        #{provcode,jdbcType=VARCHAR},
		      </if>
		      <if test="useridBoss != null" >
		        #{useridBoss,jdbcType=VARCHAR},
		      </if>
		      <if test="ordertimeBoss != null" >
		        #{ordertimeBoss,jdbcType=TIMESTAMP},
		      </if>
		      <if test="devicetype != null" >
		        #{devicetype,jdbcType=VARCHAR},
		      </if>
		      <if test="usernameBoss != null" >
		        #{usernameBoss,jdbcType=VARCHAR},
		      </if>
		      <if test="useraddressBoss != null" >
		        #{useraddressBoss,jdbcType=VARCHAR},
		      </if>
		      <if test="contactpersonBoss != null" >
		        #{contactpersonBoss,jdbcType=VARCHAR},
		      </if>
		      <if test="contactmannerBoss != null" >
		        #{contactmannerBoss,jdbcType=VARCHAR},
		      </if>
		      <if test="vlanid != null" >
		        #{vlanid,jdbcType=VARCHAR},
		      </if>
		      <if test="laninterface != null" >
		        #{laninterface,jdbcType=VARCHAR},
		      </if>
		      <if test="ipaddress != null" >
		        #{ipaddress,jdbcType=VARCHAR},
		      </if>
		      <if test="subnetmask != null" >
		        #{subnetmask,jdbcType=VARCHAR},
		      </if>
		      <if test="defaultgateway != null" >
		        #{defaultgateway,jdbcType=VARCHAR},
		      </if>
		      <if test="portSip != null" >
		        #{portSip,jdbcType=VARCHAR},
		      </if>
		      <if test="uriSip != null" >
		        #{uriSip,jdbcType=VARCHAR},
		      </if>
		      <if test="defaultconnectionservice != null" >
		        #{defaultconnectionservice,jdbcType=VARCHAR},
		      </if>
		      <if test="wanInterface != null" >
		        #{wanInterface,jdbcType=VARCHAR},
		      </if>
        </trim>
    </insert>

    <insert id="batchInsert" parameterType="java.util.List">

        INSERT INTO t_gateway_business ( id, gateway_uuid, business_code,business_code_boss, business_name, parameter_list, business_statu, areacode,
        bandwidth, create_time, business_type, gateway_password, adsl_password, adsl_account,
        order_no, update_time, fail_count) values
        <foreach collection="list" item="item" index="index" separator=",">
            (
                #{item.id,jdbcType=VARCHAR},
                #{item.gatewayUuid,jdbcType=VARCHAR},
                #{item.businessCode,jdbcType=VARCHAR},
                #{item.businessCodeBoss,jdbcType=VARCHAR},
                #{item.businessName,jdbcType=VARCHAR},
                #{item.parameterList,jdbcType=VARCHAR},
                #{item.businessStatu,jdbcType=VARCHAR},
                #{item.areacode,jdbcType=VARCHAR},
                #{item.bandwidth,jdbcType=INTEGER},
                #{item.createTime,jdbcType=INTEGER},
                #{item.businessType,jdbcType=VARCHAR},
                #{item.gatewayPassword,jdbcType=VARCHAR},
                #{item.adslPassword,jdbcType=VARCHAR},
                #{item.adslAccount,jdbcType=VARCHAR},
                #{item.orderNo,jdbcType=VARCHAR},
                #{item.updateTime,jdbcType=INTEGER},
                #{item.failCount,jdbcType=INTEGER}
            )
        </foreach>
    </insert>
    <update id="updateByPrimayKey" parameterType="com.cmiot.rms.dao.model.GatewayBusiness" >
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update t_gateway_business
        <set >
            <if test="businessCode != null" >
                business_code = #{businessCode,jdbcType=VARCHAR},
            </if>
            <if test="businessCodeBoss != null" >
                business_code_boss = #{businessCodeBoss,jdbcType=VARCHAR},
            </if>
            <if test="businessName != null" >
                business_name = #{businessName,jdbcType=VARCHAR},
            </if>
            <if test="parameterList != null" >
                parameter_list = #{parameterList,jdbcType=VARCHAR},
            </if>
            <if test="businessStatu != null" >
                business_statu = #{businessStatu,jdbcType=VARCHAR},
            </if>
            <if test="areacode != null">
                areacode = #{areacode,jdbcType=VARCHAR},
            </if>
            <if test="bandwidth != null">
                bandwidth = #{bandwidth,jdbcType=INTEGER},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=INTEGER},
            </if>
            <if test="businessType != null">
                business_type = #{businessType,jdbcType=VARCHAR},
            </if>
            <if test="gatewayPassword != null">
                gateway_password = #{gatewayPassword,jdbcType=VARCHAR},
            </if>
            <if test="adslPassword != null">
                adsl_password = #{adslPassword,jdbcType=VARCHAR},
            </if>
            <if test="adslAccount != null">
                adsl_account = #{adslAccount,jdbcType=VARCHAR},
            </if>
            <if test="orderNo != null">
                order_no = #{orderNo,jdbcType=VARCHAR},
            </if>
                update_time = unix_timestamp(NOW()),
            <if test="failCount != null and failCount != 0" >
                fail_count = #{failCount,jdbcType=INTEGER},
            </if>
            <if test="provcode != null" >
	        provCode = #{provcode,jdbcType=VARCHAR},
	      </if>
	      <if test="useridBoss != null" >
	        userId_boss = #{useridBoss,jdbcType=VARCHAR},
	      </if>
	      <if test="ordertimeBoss != null" >
	        orderTime_boss = #{ordertimeBoss,jdbcType=TIMESTAMP},
	      </if>
	      <if test="devicetype != null" >
	        deviceType = #{devicetype,jdbcType=VARCHAR},
	      </if>
	      <if test="usernameBoss != null" >
	        userName_boss = #{usernameBoss,jdbcType=VARCHAR},
	      </if>
	      <if test="useraddressBoss != null" >
	        userAddress_boss = #{useraddressBoss,jdbcType=VARCHAR},
	      </if>
	      <if test="contactpersonBoss != null" >
	        contactPerson_boss = #{contactpersonBoss,jdbcType=VARCHAR},
	      </if>
	      <if test="contactmannerBoss != null" >
	        contactManner_boss = #{contactmannerBoss,jdbcType=VARCHAR},
	      </if>
	      <if test="vlanid != null" >
	        vlanId = #{vlanid,jdbcType=VARCHAR},
	      </if>
	      <if test="laninterface != null" >
	        lanInterface = #{laninterface,jdbcType=VARCHAR},
	      </if>
	      <if test="ipaddress != null" >
	        iPAddress = #{ipaddress,jdbcType=VARCHAR},
	      </if>
	      <if test="subnetmask != null" >
	        subnetMask = #{subnetmask,jdbcType=VARCHAR},
	      </if>
	      <if test="defaultgateway != null" >
	        defaultGateway = #{defaultgateway,jdbcType=VARCHAR},
	      </if>
	      <if test="portSip != null" >
	        port_sip = #{portSip,jdbcType=VARCHAR},
	      </if>
	      <if test="uriSip != null" >
	        uri_sip = #{uriSip,jdbcType=VARCHAR},
	      </if>
	      <if test="defaultconnectionservice != null" >
	        defaultConnectionService = #{defaultconnectionservice,jdbcType=VARCHAR},
	      </if>
	      <if test="wanInterface != null" >
	        wanInterface = #{wanInterface,jdbcType=VARCHAR},
	      </if>
        </set>
        where  id = #{id,jdbcType=VARCHAR}
    </update>

    <select id="selectByParam" parameterType="com.cmiot.rms.dao.model.GatewayBusiness" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List" />
    FROM t_gateway_business
    WHERE 1=1
    <if test="gatewayUuid != null" >
        AND gateway_uuid = #{gatewayUuid,jdbcType=VARCHAR}
    </if>
    <if test="businessCode != null" >
        AND business_code = #{businessCode,jdbcType=VARCHAR}
    </if>
    <if test="businessCodeBoss != null" >
        AND business_code_boss = #{businessCodeBoss,jdbcType=VARCHAR}
    </if>
    <if test="businessName != null" >
        AND business_name = #{businessName,jdbcType=VARCHAR}
    </if>
    <if test="parameterList != null" >
        AND parameter_list = #{parameterList,jdbcType=VARCHAR}
    </if>
    <if test="businessStatu != null" >
        AND business_statu = #{businessStatu,jdbcType=VARCHAR}
    </if>
    <if test="adslAccount != null" >
        AND adsl_account = #{adslAccount,jdbcType=VARCHAR}
    </if>
    <if test="orderNo != null">
        AND order_no = #{orderNo,jdbcType=VARCHAR}
    </if>
</select>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List" />
    FROM t_gateway_business WHERE id = #{id,jdbcType=VARCHAR}
</select>

    <select id="selectExist" parameterType="com.cmiot.rms.dao.model.GatewayBusiness" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_gateway_business
        WHERE 1=1
        <if test="gatewayUuid != null" >
            AND gateway_uuid = #{gatewayUuid,jdbcType=VARCHAR}
        </if>
        <if test="businessCode != null" >
            AND business_code = #{businessCode,jdbcType=VARCHAR}
        </if>
        <if test="businessCodeBoss != null" >
            AND business_code_boss = #{businessCodeBoss,jdbcType=VARCHAR}
        </if>
        <if test="businessName != null" >
            AND business_name = #{businessName,jdbcType=VARCHAR}
        </if>
        <if test="parameterList != null" >
            AND parameter_list = #{parameterList,jdbcType=VARCHAR}
        </if>
        <if test="businessStatu != null" >
            AND business_statu != #{businessStatu,jdbcType=VARCHAR}
        </if>
        <if test="gatewayPassword != null">
            AND gateway_password = #{gatewayPassword,jdbcType=VARCHAR}
        </if>
        <if test="businessType != null">
            AND business_type = #{businessType,jdbcType=VARCHAR}
        </if>
    </select>

    <select id="selectAll" parameterType="com.cmiot.rms.dao.model.GatewayBusiness" resultMap="BaseResultMap">
         SELECT b.gateway_uuid as gateway_uuid,a.id,a.areacode,a.business_code,a.business_type,a.business_code_boss,a.parameter_list,a.business_statu ,a.adsl_account,a.business_name,a.id,a.order_no,b.gateway_macaddress as adsl_password,fail_count
        FROM t_gateway_business a,t_gateway_info b
        WHERE (a.gateway_password = b.gateway_password or a.adsl_account = b.gateway_adsl_account)
        AND b.gateway_status = "已绑定"
        AND a.business_statu = '2'
        <if test="failCount != null and failCount != 0" >
          <![CDATA[  AND fail_count < #{failCount,jdbcType=INTEGER}]]>
        </if>
    </select>

    <select id="selectMaxFail" parameterType="com.cmiot.rms.dao.model.GatewayBusiness" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_gateway_business
        WHERE 1=1
        <if test="businessStatu != null" >
            AND business_statu = #{businessStatu,jdbcType=VARCHAR}
        </if>

        <if test="gatewayPassword != null and adslAccount !=null" >
            AND (gateway_password = #{gatewayPassword,jdbcType=VARCHAR} OR adsl_account = #{adslAccount,jdbcType=VARCHAR})
        </if>
        <if test="gatewayPassword != null and adslAccount ==null" >
            AND gateway_password = #{gatewayPassword,jdbcType=VARCHAR}
        </if>
        <if test="gatewayPassword == null and adslAccount !=null" >
            AND adsl_account = #{adslAccount,jdbcType=VARCHAR}
        </if>
        <if test="failCount != null and failCount != 0" >
            <![CDATA[  AND fail_count = #{failCount,jdbcType=INTEGER}]]>
        </if>
        ORDER  BY create_time ASC

    </select>

    <update id="batchUpdateStatus" parameterType="java.util.HashMap">
        update t_gateway_business
        set business_statu = #{businessStatu,jdbcType=VARCHAR},update_time = unix_timestamp(NOW())
        where id IN
        <foreach  collection="ids" index="index" item="item" open="(" separator="," close=")">
            #{item,jdbcType=VARCHAR}
        </foreach>
    </update>

    <select id="selectBusinessList" parameterType="java.util.HashMap" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_gateway_business
        WHERE 1=1
        <if test="gatewayUuid != null" >
            AND gateway_uuid = #{gatewayUuid,jdbcType=VARCHAR}
        </if>
        <if test="businessCode != null" >
            AND business_code = #{businessCode,jdbcType=VARCHAR}
        </if>
        <if test="businessCodeBoss != null" >
            AND business_code_boss = #{businessCodeBoss,jdbcType=VARCHAR}
        </if>
        <if test="businessName != null" >
            AND business_name = #{businessName,jdbcType=VARCHAR}
        </if>
        <if test="parameterList != null" >
            AND parameter_list = #{parameterList,jdbcType=VARCHAR}
        </if>
        <if test="businessStatu != null" >
            AND business_statu = #{businessStatu,jdbcType=VARCHAR}
        </if>

        <if test="gatewayPassword != null and adslAccount !=null" >
            AND (gateway_password = #{gatewayPassword,jdbcType=VARCHAR} OR adsl_account = #{adslAccount,jdbcType=VARCHAR})
        </if>
        <if test="gatewayPassword != null and adslAccount ==null" >
        AND gateway_password = #{gatewayPassword,jdbcType=VARCHAR}
        </if>
        <if test="gatewayPassword == null and adslAccount !=null" >
            AND adsl_account = #{adslAccount,jdbcType=VARCHAR}
        </if>
        <if test="businessStatuList != null" >
            AND business_statu IN
            <foreach  collection="businessStatuList" index="index" item="item" open="(" separator="," close=")">
                #{item,jdbcType=VARCHAR}
            </foreach>
        </if>
        ORDER  BY create_time ASC
    </select>

    <select id="selectByOrderNos" resultMap="BaseResultMap" parameterType="java.util.List">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_gateway_business
        WHERE order_no IN 
        <foreach collection="list" index="index" item="item" open="(" close=")" separator=",">
            #{item,jdbcType=VARCHAR}
        </foreach>
    </select>

    <select id="selectByLoids" resultMap="BaseResultMap" parameterType="java.util.List">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_gateway_business
        WHERE business_statu != '4' and business_code_boss = 'wband' and gateway_password IN
        <foreach collection="list" index="index" item="item" open="(" close=")" separator=",">
            #{item,jdbcType=VARCHAR}
        </foreach>
    </select>

     <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
	    delete from t_gateway_business
	    where id = #{id,jdbcType=VARCHAR}
	  </delete>

    <update id="updateStatusByPassword" parameterType="com.cmiot.rms.dao.model.GatewayBusiness">
        update t_gateway_business
        set business_statu = #{businessStatu,jdbcType=VARCHAR},update_time = unix_timestamp(NOW())
        WHERE  gateway_password = #{gatewayPassword,jdbcType=VARCHAR}
    </update>

    <select id="selectByGatewayInfo" parameterType="com.cmiot.rms.dao.model.GatewayBusiness" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List" />
        FROM t_gateway_business
        WHERE 1=1
        <if test="gatewayUuid != null" >
            AND gateway_uuid = #{gatewayUuid,jdbcType=VARCHAR}
        </if>
        <if test="businessCode != null" >
            AND business_code = #{businessCode,jdbcType=VARCHAR}
        </if>
        <if test="businessCodeBoss != null" >
            AND business_code_boss = #{businessCodeBoss,jdbcType=VARCHAR}
        </if>
        <if test="businessName != null" >
            AND business_name = #{businessName,jdbcType=VARCHAR}
        </if>
        <if test="parameterList != null" >
            AND parameter_list = #{parameterList,jdbcType=VARCHAR}
        </if>
        <if test="businessStatu != null" >
            AND business_statu = #{businessStatu,jdbcType=VARCHAR}
        </if>

        <if test="gatewayPassword != null and adslAccount !=null" >
            AND (gateway_password = #{gatewayPassword,jdbcType=VARCHAR} OR adsl_account = #{adslAccount,jdbcType=VARCHAR})
        </if>
        <if test="gatewayPassword != null and adslAccount ==null" >
            AND gateway_password = #{gatewayPassword,jdbcType=VARCHAR}
        </if>
        <if test="gatewayPassword == null and adslAccount !=null" >
            AND adsl_account = #{adslAccount,jdbcType=VARCHAR}
        </if>
        <if test="failCount != null and failCount != 0" >
            <![CDATA[  AND fail_count < #{failCount,jdbcType=INTEGER}]]>
        </if>
        ORDER  BY create_time ASC
    </select>

    <update id="updateStatusByOrderno" parameterType="com.cmiot.rms.dao.model.GatewayBusiness">
        update t_gateway_business
        set business_statu = #{businessStatu,jdbcType=VARCHAR},update_time = unix_timestamp(NOW())
        WHERE  business_statu = 2  AND order_no = #{orderNo,jdbcType=VARCHAR}
    </update>

    <update id="updateStatusByPwdAndBusiness" parameterType="com.cmiot.rms.dao.model.GatewayBusiness">
        update t_gateway_business
        set business_statu = #{businessStatu,jdbcType=VARCHAR},update_time = unix_timestamp(NOW())
        WHERE  gateway_password = #{gatewayPassword,jdbcType=VARCHAR} AND business_code_boss = #{businessCodeBoss,jdbcType=VARCHAR}
    </update>
</mapper>